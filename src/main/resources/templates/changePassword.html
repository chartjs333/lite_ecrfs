<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MJFF - Change Password</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.6.3/css/foundation.min.css" />
    <style>
      body {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      #wrap-everything {
        background: white;
        border-radius: 8px;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        padding: 2rem;
        width: 90%;
        max-width: 500px;
      }
      h5 {
        color: #db8110;
        font-weight: 600;
        text-align: center;
        margin-bottom: 1.5rem;
      }
      label {
        color: #585a5a;
        font-weight: 600;
      }
      input[type="password"] {
        border-radius: 4px;
        border: 1px solid #ddd;
        padding: 0.5rem;
      }
      .button {
        background-color: #db8110;
        border-radius: 4px;
        font-weight: 600;
        transition: background-color 0.3s ease;
      }
      .button:hover {
        background-color: #db8110;
      }
      .signup-link {
        text-align: center;
        margin-top: 1rem;
      }
      .signup-link a {
        color: #136294;
        font-weight: 600;
      }
      .error-message {
        color: #ac202d;
        font-size: 0.875rem;
        margin-top: 0.5rem;
      }
      .success-message {
        color: #28a745;
        font-size: 0.875rem;
        margin-top: 0.5rem;
      }
      .password-requirements {
        font-size: 0.875rem;
        margin: 0.5rem 0;
        color: #666;
      }
      .requirement {
        margin: 0.2rem 0;
      }
      .requirement.met {
        color: #28a745;
      }
      .requirement.unmet {
        color: #ac202d;
      }
      .requirement::before {
        content: '•';
        margin-right: 0.5rem;
      }
      .requirement.met::before {
        content: '✓';
        color: #28a745;
      }
      .requirement.unmet::before {
        content: '×';
        color: #ac202d;
      }
    </style>
</head>
<body>
    <div id="wrap-everything">
      <h5>Change Password</h5>
      
      <!-- Сообщения об ошибках и успешных операциях -->
      <div th:if="${error}" class="error-message" th:text="${error}"></div>
      <div th:if="${message}" class="success-message" th:text="${message}"></div>
      
      <form th:action="@{/change-password}" th:object="${changePasswordDTO}" method="post">
        <div class="row">
          <div class="small-12 columns">
            <label for="currentPassword">Current Password</label>
            <input type="password" id="currentPassword" required="required" th:field="*{currentPassword}" />
          </div>
        </div>
        <div class="row">
          <div class="small-12 columns">
            <label for="newPassword">New Password</label>
            <input type="password" id="newPassword" required="required" th:field="*{newPassword}" />
            <div class="password-requirements">
              <div class="requirement" id="length">Length: 12-16 characters</div>
              <div class="requirement" id="uppercase">Contains uppercase letter</div>
              <div class="requirement" id="lowercase">Contains lowercase letter</div>
              <div class="requirement" id="number">Contains number</div>
              <div class="requirement" id="special">Contains special character (!@#$%^*-_)</div>
            </div>
            <div class="password-examples">
              <small>Examples of good passwords:</small>
              <ul>
                <li><small>MedicaL-2024!</small></li>
                <li><small>Clinic-Doctor42!</small></li>
                <li><small>Puls@Med-357</small></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="small-12 columns">
            <label for="confirmNewPassword">Confirm New Password</label>
            <input type="password" id="confirmNewPassword" required="required" th:field="*{confirmNewPassword}" />
          </div>
        </div>
        <div class="row">
          <div class="small-12 columns">
            <button type="submit" class="button expanded">Save Changes</button>
          </div>
        </div>
      </form>
      
      <div class="signup-link">
        <a href="/">Return to Home</a>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.6.3/js/foundation.min.js"></script>
    <script th:src="@{/js/password-validation.js}"></script>
</body>
</html>
